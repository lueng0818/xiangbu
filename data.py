# ==============================================================================
# data.py - 核心數據與定義
# ==============================================================================

# 棋子價值對應表
VALUE_MAP = {
    '兵': 2, '卒': 2, '炮': 4, '包': 4, '馬': 8, '傌': 8, 
    '車': 12, '俥': 12, '相': 16, '象': 16, '仕': 24, '士': 24, 
    '帥': 30, '將': 30,
}

# 棋子名稱對應
PIECE_NAMES = {
    '紅': ['帥', '仕', '相', '傌', '炮', '俥', '兵'],
    '黑': ['將', '士', '象', '馬', '包', '車', '卒'],
}

# 棋子屬性與五行對應
ATTRIBUTES = {
    "車": {"五行": "木", "特質": "衝直愛管人", "身體": "肝膽筋目", "適合": "自己經營更佳"},
    "俥": {"五行": "木", "特質": "不受約束, 眼光高", "身體": "肝膽筋目", "適合": "自己經營更佳"},
    "馬": {"五行": "木", "特質": "遊走人際間, 好管閒事", "身體": "關節經絡", "適合": "奔波見財, 不動停滯"},
    "傌": {"五行": "木", "特質": "內外兼顧, 賢妻", "身體": "關節經絡", "適合": "奔波見財, 不動停滯"},
    "象": {"五行": "火", "特質": "足智多謀, 修行", "身體": "心小腸血脈舌血循", "適合": "不動產, 靜止財"},
    "相": {"五行": "火", "特質": "宰相, 有官印帶權", "身體": "心小腸血脈舌血循", "適合": "不動產, 靜止財"},
    "兵": {"五行": "土", "特質": "腳踏實地, 只進不退", "身體": "脾腸胃肌肉口", "適合": "現金財庫, 不投機"},
    "卒": {"五行": "土", "特質": "團結力量大", "身體": "脾腸胃肌肉口", "適合": "現金財庫, 不投機"},
    "將": {"五行": "金", "特質": "君王, 獨攬", "身體": "肺大腸皮膚鼻, 頭部", "適合": "適合事業, 不適合婚姻"},
    "帥": {"五行": "金", "特質": "領袖, 掌權者", "身體": "肺大腸皮膚鼻, 頭部", "適合": "適合事業, 不適合婚姻"},
    "士": {"五行": "金", "特質": "一人之下, 文昌", "身體": "肺大腸皮膚鼻", "適合": "大吉大利, 投資運佳"},
    "仕": {"五行": "金", "特質": "帶權名聲, 有威嚴", "身體": "肺大腸皮膚鼻", "適合": "大吉大利, 投資運佳"},
    "包": {"五行": "水", "特質": "人緣佳, 小桃花", "身體": "腎膀胱骨耳婦科", "適合": "智慧型, 流動事業"},
    "炮": {"五行": "水", "特質": "想飛想改變, 好高騖遠", "身體": "腎膀胱骨耳婦科", "適合": "智慧型, 流動事業"},
}

# 棋子符號學詳細解讀 (Archetypes)
PIECE_SYMBOLISM = {
    "將帥": {
        "role": "👑 唯我獨尊的領導者",
        "self": "非常有主見，想要掌控一切，能量強但易感孤獨。適合自己做決定。",
        "love": "對方較大男人/大女人，喜歡主導。關係不宜硬碰硬。",
        "career": "老闆命/主管格。適合創業，但需防氣盛自以為是。",
        "health": "頭部壓力大、神經傳導、用腦過度。"
    },
    "士仕": {
        "role": "📜 足智多謀的幕僚",
        "self": "智慧高，像軍師一樣。紅仕心軟助人，黑士防備心重。",
        "love": "關係不錯，但需注意口角 (若在左右位置)。",
        "career": "主管格，有權力與貴人運。適合靠口才、腦袋的工作 (文昌)。",
        "health": "呼吸道不順、腸胃敏感 (大腸)。"
    },
    "象相": {
        "role": "🛡️ 穩重的守護者",
        "self": "心態穩重，喜靜不喜動。有佛緣或修行根基。",
        "love": "配對皆佳，情緒起伏較大 (火行)。",
        "career": "適合不動產、穩定財、小本經營。",
        "health": "火氣大，發脾氣傷心臟，易發福。"
    },
    "車俥": {
        "role": "🏎️ 衝鋒陷陣的戰將",
        "self": "衝勁十足，拼命三郎。小心說話太直得罪人。",
        "love": "對方強勢愛管人，不受約束。相處易鬥嘴，像兩車互撞。",
        "career": "大好大壞，適合自己當老闆或業務，敢衝敢賺。",
        "health": "肝火旺，易抽筋、睡眠差。"
    },
    "馬傌": {
        "role": "🐎 奔波的公關/忙碌者",
        "self": "忙碌停不下來，處理人際關係。口才與社交能力強。",
        "love": "適合有點距離 (斜對)。若太黏容易有磨擦。",
        "career": "動才有財。若在中間 (辦公室內) 會施展不開。",
        "health": "筋骨痠痛，勞碌命。"
    },
    "包炮": {
        "role": "💣 善變的謀略家",
        "self": "想改變現狀，心大，點子多但易流於空想。",
        "love": "桃花星，人緣好。感情適合保持距離 (隔山打牛)，太黏易吵。",
        "career": "靠腦袋賺錢，適合時效性、流動性生意 (行銷/股票)。",
        "health": "內分泌、婦科、神經緊繃。"
    },
    "兵卒": {
        "role": "🧱 踏實的執行者",
        "self": "認真踏實，一步一腳印。講信用，非常穩重。",
        "love": "最穩定的牌，認定就不變心。雖不浪漫但可靠。",
        "career": "現金財。錢進來要快存 (變固定資產)，否則留不住。",
        "health": "消化慢，思慮多傷脾胃。"
    }
}

# 輔助映射：將單字對應到符號學 Key
SYMBOL_KEY_MAP = {
    '將': '將帥', '帥': '將帥', '士': '士仕', '仕': '士仕',
    '象': '象相', '相': '象相', '車': '車俥', '俥': '車俥',
    '馬': '馬傌', '傌': '馬傌', '包': '包炮', '炮': '包炮',
    '兵': '兵卒', '卒': '兵卒'
}

# 五行身心診斷詳細話術
FIVE_ELEMENTS_DETAILS = {
    "木": {"emotion": "怒", "organs": "肝、膽、筋、目", "psycho_msg": "心裡是否積壓了很多怒氣？或覺得一定要爭一口氣（報復心）？即使外表溫和，內心容易因忙碌而生悶氣。", "physio_msg": "注意睡眠品質（肝膽排毒），容易肩頸僵硬、抽筋或眼睛乾澀。", "advice": "少生氣，多伸展筋骨，釋放壓力。"},
    "火": {"emotion": "喜", "organs": "心、小腸、血脈", "psycho_msg": "情緒起伏很大，一下子開心，一下子急躁。這種『急』會傷到心神。", "physio_msg": "注意血壓、心悸問題，或因吃太好導致小腸吸收過度而發胖。", "advice": "練習慢呼吸，不要太亢奮，平穩心氣。"},
    "土": {"emotion": "思", "organs": "脾、胃、肌肉", "psycho_msg": "太緊張了，對細節非常在意，反覆思考（思傷胃），事情還沒做人先累了。", "physio_msg": "容易胃口不好、脹氣、消化不良，肌肉也容易無力。", "advice": "放寬心，『吃飯皇帝大』，用餐時不要想公事。"},
    "金": {"emotion": "憂", "organs": "肺、大腸、皮膚、鼻", "psycho_msg": "很有義氣，但易『自以為是』，覺得別人不懂你而產生悲觀悶氣，積在胸口。", "physio_msg": "注意呼吸道、鼻子過敏，皮膚狀況變差，或容易便秘。", "advice": "多做深呼吸，把心中的悲悶吐出來。"},
    "水": {"emotion": "恐", "organs": "腎、膀胱、骨、耳", "psycho_msg": "很聰明但用腦過度。對未來有莫名恐懼感或不安全感，總覺得會出事。", "physio_msg": "注意內分泌系統，女性留意婦科，男性留意腎水不足，腰痠背痛或耳鳴。", "advice": "早點睡覺補腎氣，不要胡思亂想。"}
}

# 占卜架構與位置邏輯
POSITION_MAP = {
    1: {"名稱": "中 (身/人格)", "關係": "核心/當下", "部位": "軀幹", "意義": "元氣、核心病灶、消化與心肺功能、當事人的意志力。"},
    4: {"名稱": "上 (頭/天格)", "關係": "根源/保護/過去", "部位": "頭部", "意義": "精神意識、睡眠品質、腦壓、長輩緣、決策層。"},
    5: {"名稱": "下 (肢/地格)", "關係": "結果/基礎/未來", "部位": "下肢", "意義": "行動力、代謝排水、婦科/泌尿、財庫、結局。"},
    2: {"名稱": "左 (右側)", "關係": "平輩/助力/情感", "部位": "👉 右半身", "意義": "鏡像原理：盤面左邊對應身體右側。人際：競爭或合作。"},
    3: {"名稱": "右 (左側)", "關係": "平輩/助力/情感", "部位": "👈 左半身", "意義": "鏡像原理：盤面右邊對應身體左側。人際：競爭或合作。"}
}

# 能量調理建議
ENERGY_REMEDIES = {
    "Red": {"status": "🔥 血氣旺 (燥熱、發炎、亢奮)", "symptoms": "血壓高、發炎紅腫、情緒急躁、口乾舌燥。", "method": "赤腳踩草地 (Earthing)", "principle": "紅色屬火。利用大地陰性磁場導出體內過多正電荷(火氣)。", "advice": "您最近像引擎過熱，建議去公園赤腳踩草地，把身上的『火』洩掉。"},
    "Black": {"status": "💧 氣血旺 (氣滯、寒濕、循環差)", "symptoms": "手腳冰冷、痠痛氣結、水腫、情緒憂鬱。", "method": "曬太陽補陽 (Sun Bathing)", "principle": "黑色屬水。太陽是宇宙最強陽氣，能推動氣血，驅除寒濕。", "advice": "身體比較『寒』，氣卡住了。多曬曬背(陽氣之海)，把陰霾曬乾。"}
}

# 幾何關係
GEOMETRY_RELATION = {
    1: {2: "十字", 3: "十字", 4: "十字", 5: "十字"},
    2: {1: "十字", 3: "平行", 4: "斜位", 5: "斜位"},
    3: {1: "十字", 2: "平行", 4: "斜位", 5: "斜位"},
    4: {1: "十字", 2: "斜位", 3: "斜位", 5: "縱隔山"},
    5: {1: "十字", 2: "斜位", 3: "斜位", 4: "縱隔山"},
}

# 圖片路徑
IMAGE_PATHS = {
    ("帥", "紅"): "static/紅帥.png", ("將", "黑"): "static/黑將.png",
    ("仕", "紅"): "static/紅仕.png", ("士", "黑"): "static/黑士.png",
    ("相", "紅"): "static/紅相.png", ("象", "黑"): "static/黑象.png",
    ("傌", "紅"): "static/紅傌.png", ("馬", "黑"): "static/黑馬.png",
    ("炮", "紅"): "static/紅炮.png", ("包", "黑"): "static/黑包.png",
    ("俥", "紅"): "static/紅俥.png", ("車", "黑"): "static/黑車.png",
    ("兵", "紅"): "static/紅兵.png", ("卒", "黑"): "static/黑卒.png",
}

def get_image_path(name, color):
    """根據棋子名稱和顏色取得圖片路徑 (容錯處理)"""
    key_name = name
    if color == "紅":
        if name == '卒': key_name = '兵'
        if name == '車': key_name = '俥'
        if name == '馬': key_name = '傌'
        if name == '包': key_name = '炮'
        if name == '象': key_name = '相'
        if name == '士': key_name = '仕'
    if color == "黑":
        if name == '兵': key_name = '卒'
        if name == '俥': key_name = '車'
        if name == '傌': key_name = '馬'
        if name == '炮': key_name = '包'
        if name == '相': key_name = '象'
        if name == '仕': key_name = '士'
    return IMAGE_PATHS.get((key_name, color))
