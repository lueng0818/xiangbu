# ==============================================================================
# data.py - 核心數據與定義
# ==============================================================================

# 棋子價值對應表
VALUE_MAP = {
    '兵': 2, '卒': 2, '炮': 4, '包': 4, '馬': 8, '傌': 8, 
    '車': 12, '俥': 12, '相': 16, '象': 16, '仕': 24, '士': 24, 
    '帥': 30, '將': 30,
}

# 棋子名稱對應
PIECE_NAMES = {
    '紅': ['帥', '仕', '相', '傌', '炮', '俥', '兵'],
    '黑': ['將', '士', '象', '馬', '包', '車', '卒'],
}

# 棋子屬性與五行對應
ATTRIBUTES = {
    "車": {"五行": "木", "特質": "衝直愛管人", "身體": "肝膽筋目", "適合": "自己經營更佳"},
    "俥": {"五行": "木", "特質": "不受約束, 眼光高", "身體": "肝膽筋目", "適合": "自己經營更佳"},
    "馬": {"五行": "木", "特質": "遊走人際間, 好管閒事", "身體": "關節經絡", "適合": "奔波見財, 不動停滯"},
    "傌": {"五行": "木", "特質": "內外兼顧, 賢妻", "身體": "關節經絡", "適合": "奔波見財, 不動停滯"},
    
    "象": {"五行": "火", "特質": "足智多謀, 修行", "身體": "心小腸血脈舌血循", "適合": "不動產, 靜止財"},
    "相": {"五行": "火", "特質": "宰相, 有官印帶權", "身體": "心小腸血脈舌血循", "適合": "不動產, 靜止財"},
    
    "兵": {"五行": "土", "特質": "腳踏實地, 只進不退", "身體": "脾腸胃肌肉口", "適合": "現金財庫, 不投機"},
    "卒": {"五行": "土", "特質": "團結力量大", "身體": "脾腸胃肌肉口", "適合": "現金財庫, 不投機"},
    
    "將": {"五行": "金", "特質": "君王, 獨攬", "身體": "肺大腸皮膚鼻, 頭部", "適合": "適合事業, 不適合婚姻"},
    "帥": {"五行": "金", "特質": "領袖, 掌權者", "身體": "肺大腸皮膚鼻, 頭部", "適合": "適合事業, 不適合婚姻"},
    "士": {"五行": "金", "特質": "一人之下, 文昌", "身體": "肺大腸皮膚鼻", "適合": "大吉大利, 投資運佳"},
    "仕": {"五行": "金", "特質": "帶權名聲, 有威嚴", "身體": "肺大腸皮膚鼻", "適合": "大吉大利, 投資運佳"},
    
    "包": {"五行": "水", "特質": "人緣佳, 小桃花", "身體": "腎膀胱骨耳婦科", "適合": "智慧型, 流動事業"},
    "炮": {"五行": "水", "特質": "想飛想改變, 好高騖遠", "身體": "腎膀胱骨耳婦科", "適合": "智慧型, 流動事業"},
}

# 五行身心診斷詳細話術
FIVE_ELEMENTS_DETAILS = {
    "木": {
        "emotion": "怒 (壓抑/浮躁)",
        "organs": "肝、膽、筋、目",
        "psycho_msg": "心裡是否積壓了很多怒氣？或覺得一定要爭一口氣（報復心）？即使外表溫和，內心容易因忙碌而生悶氣。",
        "physio_msg": "注意睡眠品質（肝膽排毒），容易肩頸僵硬、抽筋或眼睛乾澀。",
        "advice": "少生氣，多伸展筋骨，釋放壓力。"
    },
    "火": {
        "emotion": "喜 (情緒起伏/急躁)",
        "organs": "心、小腸、血脈",
        "psycho_msg": "情緒起伏很大，一下子開心，一下子急躁。這種『急』會傷到心神。",
        "physio_msg": "注意血壓、心悸問題，或因吃太好導致小腸吸收過度而發胖。",
        "advice": "練習慢呼吸，不要太亢奮，平穩心氣。"
    },
    "土": {
        "emotion": "思 (緊張/焦慮)",
        "organs": "脾、胃、肌肉",
        "psycho_msg": "太緊張了，對細節非常在意，反覆思考（思傷胃），事情還沒做人先累了。",
        "physio_msg": "容易胃口不好、脹氣、消化不良，肌肉也容易無力。",
        "advice": "放寬心，『吃飯皇帝大』，用餐時不要想公事。"
    },
    "金": {
        "emotion": "憂 (悲觀/自以為是)",
        "organs": "肺、大腸、皮膚、鼻",
        "psycho_msg": "很有義氣，但易『自以為是』，覺得別人不懂你而產生悲觀悶氣，積在胸口。",
        "physio_msg": "注意呼吸道、鼻子過敏，皮膚狀況變差，或容易便秘。",
        "advice": "多做深呼吸，把心中的悲悶吐出來。"
    },
    "水": {
        "emotion": "恐 (驚疑/用腦過度)",
        "organs": "腎、膀胱、骨、耳",
        "psycho_msg": "很聰明但用腦過度。對未來有莫名恐懼感或不安全感，總覺得會出事。",
        "physio_msg": "注意內分泌系統，女性留意婦科，男性留意腎水不足，腰痠背痛或耳鳴。",
        "advice": "早點睡覺補腎氣，不要胡思亂想。"
    }
}

# 【更新】占卜架構與位置邏輯 (納入身體全息與鏡像對應)
POSITION_MAP = {
    1: {
        "名稱": "中 (身/人格)", 
        "關係": "核心/當下/自己", 
        "部位": "軀幹 (胸腔、腹部、五臟六腑)",
        "意義": "元氣、核心病灶、消化與心肺功能、當事人的意志力。"
    },
    4: {
        "名稱": "上 (頭/天格)", 
        "關係": "根源/保護/過去", 
        "部位": "頭部 (腦、臉、五官、頸)",
        "意義": "精神意識、睡眠品質、腦壓、長輩緣、決策層。"
    },
    5: {
        "名稱": "下 (肢/地格)", 
        "關係": "結果/基礎/未來", 
        "部位": "下肢 (腰、腿、膝、生殖系統)",
        "意義": "行動力、代謝排水、婦科/泌尿、財庫、結局。"
    },
    2: {
        "名稱": "左 (右側)", 
        "關係": "平輩/助力/情感", 
        "部位": "👉 右半身 (右手、右肩、右肺、右腎)",
        "意義": "鏡像原理：盤面左邊對應身體右側。人際：競爭或合作。"
    },
    3: {
        "名稱": "右 (左側)", 
        "關係": "平輩/助力/情感", 
        "部位": "👈 左半身 (左手、左肩、左肺、左腎)",
        "意義": "鏡像原理：盤面右邊對應身體左側。人際：競爭或合作。"
    }
}

# 【新增】能量調理建議 (紅 vs 黑)
ENERGY_REMEDIES = {
    "Red": {
        "status": "🔥 血氣旺 (燥熱、發炎、亢奮)",
        "symptoms": "血壓高、發炎紅腫、情緒急躁、口乾舌燥。",
        "method": "赤腳踩草地 (Earthing)",
        "principle": "紅色屬火。利用大地陰性磁場導出體內過多正電荷(火氣)。",
        "advice": "您最近像引擎過熱，建議去公園赤腳踩草地，把身上的『火』洩掉。"
    },
    "Black": {
        "status": "💧 氣血旺 (氣滯、寒濕、循環差)",
        "symptoms": "手腳冰冷、痠痛氣結、水腫、情緒憂鬱。",
        "method": "曬太陽補陽 (Sun Bathing)",
        "principle": "黑色屬水。太陽是宇宙最強陽氣，能推動氣血，驅除寒濕。",
        "advice": "身體比較『寒』，氣卡住了。多曬曬背(陽氣之海)，把陰霾曬乾。"
    }
}

# 幾何關係
GEOMETRY_RELATION = {
    1: {2: "十字", 3: "十字", 4: "十字", 5: "十字"},
    2: {1: "十字", 3: "平行", 4: "斜位", 5: "斜位"},
    3: {1: "十字", 2: "平行", 4: "斜位", 5: "斜位"},
    4: {1: "十字", 2: "斜位", 3: "斜位", 5: "縱隔山"},
    5: {1: "十字", 2: "斜位", 3: "斜位", 4: "縱隔山"},
}

# 圖片路徑
IMAGE_PATHS = {
    ("帥", "紅"): "static/紅帥.png", ("將", "黑"): "static/黑將.png",
    ("仕", "紅"): "static/紅仕.png", ("士", "黑"): "static/黑士.png",
    ("相", "紅"): "static/紅相.png", ("象", "黑"): "static/黑象.png",
    ("傌", "紅"): "static/紅傌.png", ("馬", "黑"): "static/黑馬.png",
    ("炮", "紅"): "static/紅炮.png", ("包", "黑"): "static/黑包.png",
    ("俥", "紅"): "static/紅俥.png", ("車", "黑"): "static/黑車.png",
    ("兵", "紅"): "static/紅兵.png", ("卒", "黑"): "static/黑卒.png",
}

def get_image_path(name, color):
    """根據棋子名稱和顏色取得圖片路徑 (容錯處理)"""
    key_name = name
    if color == "紅":
        if name == '卒': key_name = '兵'
        if name == '車': key_name = '俥'
        if name == '馬': key_name = '傌'
        if name == '包': key_name = '炮'
        if name == '象': key_name = '相'
        if name == '士': key_name = '仕'
    if color == "黑":
        if name == '兵': key_name = '卒'
        if name == '俥': key_name = '車'
        if name == '傌': key_name = '馬'
        if name == '炮': key_name = '包'
        if name == '相': key_name = '象'
        if name == '仕': key_name = '士'
    return IMAGE_PATHS.get((key_name, color))
